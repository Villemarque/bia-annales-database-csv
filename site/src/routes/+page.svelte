<script lang="ts">
	import Card from '../components/Card.svelte';
	import { questionsBySubject } from '$lib/stores/questions';

	// Mapping based on annales-bia.csv analysis:
	// 0: M√©t√©orologie
	// 1: A√©rodynamique
	// 2: Connaissance des A√©ronefs
	// 3: Navigation / R√©glementation
	// 4: Histoire
	// 5: Anglais

	// for SEO, and faster initial load
	// only prerendered at build time
	// export const prerender = true;
	// export const ssr = true;

	const cards = [
		{
			subjectId: 2,
			icon: '‚úàÔ∏é',
			color: 'var(--card-indigo)',
			title: 'Connaissance des A√©ronefs',
			desc: 'Structure et syst√®mes avion.',
			href: '/quiz'
		},
		{
			subjectId: 1,
			icon: '„Ä∞Ô∏é',
			color: 'var(--card-blue)',
			title: 'A√©rodynamique',
			desc: 'Forces et √©quilibres en vol.'
		},
		{
			subjectId: 0,
			icon: '‚òÅÔ∏é',
			color: 'var(--card-green)',
			title: 'M√©t√©orologie',
			desc: 'Ph√©nom√®nes atmosph√©riques.'
		},
		{
			subjectId: 3,
			icon: 'üß≠',
			color: 'var(--card-orange)',
			title: 'Navigation / R√©glementation',
			desc: 'Orientation et r√®gles de l‚Äôair.'
		},
		{
			subjectId: 4,
			icon: '‚è≥',
			color: 'var(--card-red)',
			title: 'Histoire',
			desc: '√âvolution de l‚Äôaviation.'
		},
		{
			subjectId: 5,
			icon: 'EN',
			color: 'var(--card-pink)',
			title: 'Anglais',
			desc: 'Communication a√©ronautique.'
		}
	];
</script>

<section class="grid">
	{#each cards as c}
		<Card {...c} totalQuestions={$questionsBySubject[c.subjectId] || 0} answeredQuestions={50} seenQuestions={100} />
	{/each}
</section>

<style>
	.grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(min(260px, 100%), 1fr));
		gap: 28px;
	}
</style>
